<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Guess Game Demo</title>
    <link rel="stylesheet" href="css/styles.css" media="screen" title="no title" charset="utf-8">
  </head>
  <body>
    <div class="header">
      <h1 class="sub-heading">Taylor's Guessing Game</h1>
    </div>

    <div class="push">
      <!-- this is empty to compensate for the header -->
    </div>

    <div>
      <h1 class="" id="userName"></h1>
    </div>

    <div>
      <h1 class="" id="question"> </h1>
      <h2 class="" id="answer"> </h2>
    </div>

    <div>
      <form action="" id="userAnswerForm" class="form-field">
        <input type="text" class="txt-field-style" name="userAnswer" id="userAnswer" placeholder="Put Your Answer Here"><br />
        <input type="button" class="btn-style" id="userSubmitButton" onclick = "onSubmitAnswer()" value="Submit Answer">
        <input type="button" class="btn-style" id="nextQuestionButton" onclick = "displayNextQuestion()" value="Next Question" style="display:none">
      </form>
    </div>

    <script type="text/javascript">
      var userName, answer = '';
      var currentQuestion;

      //udpates page with text
      var displayOnPage = function(elmId,msg){
        document.getElementById(elmId).innerHTML = msg;
      };

      //grabs the users answer and then checks value.
      var onSubmitAnswer = function(event){
        answer = document.getElementById('userAnswer').value;
        console.log("The answer from button submit " + answer);

        game.currentQuestion.checkAnswer(answer);
        document.getElementById('nextQuestionButton').style.display = "inline-block";
        document.getElementById('userSubmitButton').style.display = "none";
      };

      var displayNextQuestion = function(event){
        game.nextQuestion(); //show next question
        game.clearAnswer(); //clear previous answer
        document.getElementById('userSubmitButton').style.display = "inline-block";
        document.getElementById('nextQuestionButton').style.display = "none";
      };

      // ask for the users name
      userName = prompt("Enter your name");
      displayOnPage('userName', "Hi " + userName + ". Let's play a game.");

      console.log("This is the userName var: " + userName);

      //questions all have the same, repetitive properties. Lets build an object.
      var Question = function(question, answer, correctMsg, incorrectMsg){
        this.question = question;
        this.answer = answer;
        this.correctMsg = correctMsg;
        this.incorrectMsg = incorrectMsg;
      };

      Question.prototype.checkAnswer = function(userAnswer){
        if (answer.toLowerCase() === this.answer){
            displayOnPage('answer', this.correctMsg);
          } else {
            displayOnPage('answer', this.incorrectMsg);
          }
        };

      Question.prototype.displayQuestion = function () {
        displayOnPage('question', this.question);
      };

      //lets make a Game
      var Game = function(questions) {
        this.questions = questions;
        this.questionIdx = 0;
        this.currentQuestion = questions[0];
        this.questionLength = questions.length;
      };

      Game.prototype.nextQuestion = function () {
        if (this.questionIdx < this.questionLength - 1){
          this.questionIdx++;
          this.currentQuestion = this.questions[this.questionIdx];
          this.currentQuestion.displayQuestion();
        } else {
          displayOnPage('question', "YOU FINISHED!!")
        }

      };

      Game.prototype.clearAnswer = function () {
        displayOnPage('answer', "");
      };

      var questionOne = new Question(
        "Did I grow up in the Seattle area?",
        "yes",
        "Good Job, " + userName + "! I did grow up in the area.",
        "I'm sorry " + userName + ", but I did indeed grow up in the area."
      );

      var questionTwo = new Question(
        "Have I ever visited Africa?",
        "no",
        "Good Job, " + userName + "! I have never visited Africa.",
        "I'm sorry " + userName + ", but I have never been to Africa."
      );

      var questionThree = new Question(
        "Do I own an 80lb German Shepherd / Husky dog?",
        "yes",
        "Good Job, " + userName + "! I do have a huge German Shepherd / Husky dog.",
        "I'm sorry " + userName + ", but I do indeed own a huge German Shepherd / Husky dog."
      );

      var questions = [questionOne, questionTwo, questionThree];
      var game = new Game(questions);

      var initGame = function(){
        //starts the game.
        game.currentQuestion.displayQuestion();
      };

      initGame();

      //lets ask them to quess a number between 1 and 10
      // var min = 1;
      // var max = 10;
      // correctNum = Math.floor(Math.random() * (max - min)) + min; //took this from MDN
      // displayOnPage('answer', ""); //lets clear the answer field
      //
      // answer = prompt("Try to guess the number. It is between 1 and 10.");
      // displayOnPage('question', "Try to guess the number. It is between 1 and 10.");
      //
      // console.log("The correct number is:" + correctNum);
      // console.log("The user guessed: " + answer);
      //
      // if (parseInt(answer) === correctNum) {
      //   displayOnPage('answer', "Good Job, " + userName + "! You got it right!");
      // } else if (parseInt(answer) > correctNum) {
      //   displayOnPage('answer', "Oops! Too high.");
      // } else {
      //   // must be too low
      //   displayOnPage('ansewr', "Oops! Too low.");
      // }

    </script>
  </body>
</html>
